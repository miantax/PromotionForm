<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkbox Ch∆∞∆°ng tr√¨nh Khuy·∫øn M·∫°i</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      overscroll-behavior: none;
      -webkit-overflow-scrolling: touch;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      animation: gradientShift 15s ease infinite;
      overscroll-behavior: none;
    }

    @keyframes gradientShift {
      0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
      50% { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    }

    .container {
      max-width: 950px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.98);
      padding: 40px;
      border-radius: 25px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      animation: slideIn 0.6s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    h1 {
      text-align: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 30px;
      font-size: 32px;
      font-weight: 700;
      text-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
    }

    h3 {
      margin-top: 30px;
      margin-bottom: 12px;
      color: #2d3748;
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 15px 0 25px;
    }

    .checkbox-group label {
      display: flex;
      align-items: center;
      cursor: pointer;
      padding: 14px 18px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
      border-radius: 12px;
      border: 2px solid #e2e8f0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 15px;
      color: #4a5568;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      flex: 1 1 200px;
    }

    .checkbox-group label:hover {
      background: linear-gradient(135deg, #e6f2ff 0%, #d6e8ff 100%);
      border-color: #667eea;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
    }

    .checkbox-group label:has(input:checked) {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-color: #667eea;
      color: white;
      box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
    }

    .checkbox-group label input[type="checkbox"],
    .checkbox-group label input[type="radio"] {
      margin-right: 10px;
      cursor: pointer;
      width: 20px;
      height: 20px;
      accent-color: #667eea;
    }

    textarea {
      width: 100%;
      min-height: 150px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 15px;
      resize: vertical;
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      font-family: inherit;
      font-size: 15px;
      margin-top: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      display: block;
      visibility: visible;
    }

    textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 16px 50px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 17px;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: block;
      margin: 30px auto 0;
      box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
      letter-spacing: 0.5px;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 35px rgba(102, 126, 234, 0.5);
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }

    button:active {
      transform: translateY(-1px);
    }

    #resultArea {
      margin-top: 35px;
    }

    .section-title {
      font-weight: 700;
      margin-top: 25px;
      margin-bottom: 12px;
      font-size: 20px;
      color: #2d3748;
      display: block;
      visibility: visible;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Mobile Responsive Design */
    @media screen and (max-width: 768px) {
      body {
        padding: 10px;
      }

      .container {
        padding: 24px 16px;
        border-radius: 20px;
      }

      h1 {
        font-size: 20px;
        margin-bottom: 18px;
      }

      h3 {
        font-size: 15px;
        margin-top: 20px;
        margin-bottom: 10px;
      }

      .checkbox-group {
        flex-direction: row;
        gap: 10px;
      }

      .checkbox-group label {
        flex: 1 1 calc(50% - 5px);
        min-width: 0;
        padding: 10px 8px;
        font-size: 13px;
        border-radius: 10px;
        border-width: 1.5px;
      }

      .checkbox-group label input[type="checkbox"],
      .checkbox-group label input[type="radio"] {
        width: 16px;
        height: 16px;
        margin-right: 6px;
      }

      textarea {
        min-height: 120px;
        font-size: 14px;
        padding: 12px;
      }

      button {
        width: 100%;
        padding: 16px;
        font-size: 16px;
        border-radius: 10px;
      }

      #resultArea {
        margin-top: 20px;
        display: block;
        padding: 15px 10px;
        visibility: visible;
        opacity: 1;
      }

      .section-title {
        font-size: 15px;
        margin-top: 18px;
        margin-bottom: 10px;
      }

      #resultArea .section-title {
        font-size: 15px;
        margin-top: 15px;
        margin-bottom: 8px;
        display: block;
        visibility: visible;
      }

      #resultArea textarea {
        margin-top: 8px;
        min-height: 120px;
        font-size: 13px;
        padding: 10px;
        display: block;
        width: 100%;
        visibility: visible;
        overflow-y: visible;
      }

    }

    /* Tablet Responsive Design */
    @media screen and (min-width: 769px) and (max-width: 1024px) {
      .container {
        max-width: 95%;
        padding: 35px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üè∑Ô∏è Ch∆∞∆°ng Tr√¨nh Khuy·∫øn M·∫°i - NLS</h1>

    <h3>üç∑ R∆∞·ª£u/Bia ‚â• 15 ƒë·ªô?</h3>
    <div class="checkbox-group">
      <label><input type="radio" name="alcohol" value="yes"> C√≥</label>
      <label><input type="radio" name="alcohol" value="no"> Kh√¥ng</label>
    </div>

    <h3>üéØ Ch·ªçn lo·∫°i h√¨nh khuy·∫øn m·∫°i</h3>
    <div class="checkbox-group">
      <label><input type="checkbox" name="promotionType" value="Hang mau"> H√†ng m·∫´u</label>
      <label><input type="checkbox" name="promotionType" value="Tang hang hoa/dich vu"> T·∫∑ng h√†ng h√≥a/d·ªãch v·ª•</label>
      <label><input type="checkbox" name="promotionType" value="Giam gia"> Gi·∫£m gi√°</label>
      <label><input type="checkbox" name="promotionType" value="Tang phieu mua hang"> T·∫∑ng phi·∫øu mua h√†ng</label>
      <label><input type="checkbox" name="promotionType" value="Trao thuong thi"> Trao th∆∞·ªüng thi</label>
      <label><input type="checkbox" name="promotionType" value="Chuong trinh may rui"> Ch∆∞∆°ng tr√¨nh may r·ªßi</label>
      <label><input type="checkbox" name="promotionType" value="Khach hang thuong xuyen"> Kh√°ch h√†ng th∆∞·ªùng xuy√™n</label>
      <label><input type="checkbox" name="promotionType" value="Khuyen mai dien tu"> Khuy·∫øn m·∫°i ƒëi·ªán t·ª≠</label>
      <label><input type="checkbox" name="promotionType" value="Nghe si bieu dien"> Ngh·ªá sƒ© bi·ªÉu di·ªÖn</label>
      <label><input type="checkbox" name="promotionType" value="Ban coupon"> B√°n coupon</label>
    </div>

    <button onclick="checkResult()">‚ú® Check K·∫øt Qu·∫£</button>
    
    <div id="errorMessage" style="display: none; margin-top: 20px; padding: 15px; background: #fee; border: 2px solid #fcc; border-radius: 10px; color: #c33; text-align: center; font-weight: 600;"></div>

    <div id="resultArea">
      <div class="section-title">üìò Y√™u c·∫ßu ph√°p l√Ω</div>
      <textarea id="govReq" readonly>Ch·ªçn v√† b·∫•m 'Check K·∫øt Qu·∫£' ƒë·ªÉ xem y√™u c·∫ßu ph√°p l√Ω...</textarea>

      <div class="section-title">üìÇ H·ªì s∆° c·∫ßn chu·∫©n b·ªã</div>
      <textarea id="documents" readonly>Ch·ªçn v√† b·∫•m 'Check K·∫øt Qu·∫£' ƒë·ªÉ xem h·ªì s∆° c·∫ßn chu·∫©n b·ªã...</textarea>
    </div>
  </div>

<script>
// Constants
const DOC_KEYS = {
  THONG_BAO: "Th√¥ng b√°o th·ª±c hi·ªán ch∆∞∆°ng tr√¨nh khuy·∫øn m·∫°i ƒë∆∞·ª£c Gi√°m ƒë·ªëc k√Ω duy·ªát",
  PROPOSAL: "Proposal chi ti·∫øt ch∆∞∆°ng tr√¨nh ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát",
  DUTRU_NGANSACH: "B·∫£ng d·ª± tr√π ng√¢n s√°ch v√† ph√™ duy·ªát ng√¢n s√°ch th·ª±c hi·ªán ch∆∞∆°ng tr√¨nh",
  QUYET_TOAN: "B·∫£ng quy·∫øt to√°n ch∆∞∆°ng tr√¨nh (k√®m h√¨nh ·∫£nh nghi·ªám thu ch∆∞∆°ng tr√¨nh)",
  CHUNG_TU: "B·ªô ch·ª©ng t·ª´ chu·∫©n theo quy tr√¨nh thanh to√°n",
  DANG_KY_SO: "H·ªì s∆° ƒëƒÉng k√Ω ch∆∞∆°ng tr√¨nh g·ª≠i t·ªõi S·ªü C√¥ng Th∆∞∆°ng (k√®m x√°c nh·∫≠n th√¥ng b√°o online ho·∫∑c b∆∞u ƒëi·ªán)",
  CHAP_THUAN: "Ch·∫•p thu·∫≠n ƒëƒÉng k√Ω th√†nh c√¥ng c·ªßa S·ªü C√¥ng Th∆∞∆°ng (M·∫´u s·ªë 04 Ngh·ªã ƒë·ªãnh 81/2018/Nƒê-CP)",
  TNCN: "H·ªì s∆° k√™ khai thu·∫ø TNCN cho c√° nh√¢n tr√∫ng th∆∞·ªüng (n·∫øu gi√° tr·ªã gi·∫£i th∆∞·ªüng ‚â• 10 tri·ªáu VND)",
  QUYET_DINH_CHO_BIEU: "Quy·∫øt ƒë·ªãnh cho, bi·∫øu, t·∫∑ng kh√°ch h√†ng ƒë∆∞·ª£c k√≠ v√† ph√™ duy·ªát b·ªüi gi√°m ƒë·ªëc",
  DANH_SACH_KH: "Danh s√°ch c√°c kh√°ch h√†ng ƒë∆∞·ª£c nh·∫≠n qu√† t·∫∑ng",
  HO_SO_BIEU_DIEN: "H·ªì s∆° ƒëƒÉng k√Ω c·∫•p ph√©p bi·ªÉu di·ªÖn",
  GIAY_PHEP_BIEU_DIEN: "Gi·∫•y ph√©p bi·ªÉu di·ªÖn cho ngh·ªá sƒ©"
};

// Base configuration for all promotion types
const PROMOTION_CONFIG = {
  "Hang mau": {
    requirement: "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Tang hang hoa/dich vu": {
    requirement: "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Giam gia": {
    requirement: "T·ªïng th·ªùi gian th·ª±c hi·ªán khuy·∫øn m·∫°i ƒë·ªëi v·ªõi m·ªôt lo·∫°i nh√£n hi·ªáu h√†ng h√≥a, d·ªãch v·ª• kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 120 ng√†y trong m·ªôt nƒÉm, kh√¥ng bao g·ªìm 30 ng√†y ngay tr∆∞·ªõc ng√†y ƒë·∫ßu ti√™n c·ªßa nƒÉm √Çm l·ªãch, c√°c ng√†y l·ªÖ t·∫øt theo lu·∫≠t lao ƒë·ªông, ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i c·ªßa nh√† n∆∞·ªõc (th∆∞·ªùng k√©o d√†i 1 th√°ng). \nKh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.THONG_BAO, DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Tang phieu mua hang": {
    requirement: "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.THONG_BAO, DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Trao thuong thi": {
    requirement: "Th√¥ng b√°o v·ªõi S·ªü C√¥ng Th∆∞∆°ng t·ªëi thi·ªÉu 3 ng√†y tr∆∞·ªõc khi tri·ªÉn khai n·∫øu t·ªïng gi√° tr·ªã gi·∫£i th∆∞·ªüng ‚â• 100 tri·ªáu VNƒê.",
    documents: [DOC_KEYS.THONG_BAO, DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU, DOC_KEYS.TNCN]
  },
  "Chuong trinh may rui": {
    requirement: "ƒêƒÉng k√Ω v·ªõi S·ªü C√¥ng Th∆∞∆°ng. N·∫øu kh√¥ng c√≥ ng∆∞·ªùi tr√∫ng th∆∞·ªüng, ph·∫£i n·ªôp 50% gi√° tr·ªã gi·∫£i th∆∞·ªüng cho NSNN.",
    documents: [DOC_KEYS.THONG_BAO, DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU, DOC_KEYS.DANG_KY_SO, DOC_KEYS.CHAP_THUAN, DOC_KEYS.TNCN]
  },
  "Khach hang thuong xuyen": {
    requirement: "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Khuyen mai dien tu": {
    requirement: "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Nghe si bieu dien": {
    requirement: "Xin c·∫•p ph√©p bi·ªÉu di·ªÖn;",
    documents: [DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  },
  "Ban coupon": {
    requirement: "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
    documents: [DOC_KEYS.PROPOSAL, DOC_KEYS.DUTRU_NGANSACH, DOC_KEYS.QUYET_TOAN, DOC_KEYS.CHUNG_TU]
  }
};

// Alcohol-specific overrides (yes = r∆∞·ª£u/bia ‚â• 15 ƒë·ªô)
const ALCOHOL_OVERRIDES = {
  yes: {
    requirements: {
      "Hang mau": "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c. H√†ng cho, bi·∫øu, kh√¥ng thu ti·ªÅn",
      "Tang hang hoa/dich vu": "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c. H√†ng cho, bi·∫øu, kh√¥ng thu ti·ªÅn",
      "Trao thuong thi": "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c. H√†ng cho, bi·∫øu, kh√¥ng thu ti·ªÅn",
      "Chuong trinh may rui": "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c. H√†ng cho, bi·∫øu, kh√¥ng thu ti·ªÅn",
      "Giam gia": "Kh√¥ng y√™u c·∫ßu th·ªß t·ª•c.",
      "Nghe si bieu dien": "Xin c·∫•p ph√©p bi·ªÉu di·ªÖn;"
    },
    documents: {
      add: {
        "Hang mau": [DOC_KEYS.QUYET_DINH_CHO_BIEU, DOC_KEYS.DANH_SACH_KH],
        "Tang hang hoa/dich vu": [DOC_KEYS.QUYET_DINH_CHO_BIEU, DOC_KEYS.DANH_SACH_KH],
        "Trao thuong thi": [DOC_KEYS.QUYET_DINH_CHO_BIEU, DOC_KEYS.DANH_SACH_KH],
        "Chuong trinh may rui": [DOC_KEYS.QUYET_DINH_CHO_BIEU, DOC_KEYS.DANH_SACH_KH],
        "Nghe si bieu dien": [DOC_KEYS.HO_SO_BIEU_DIEN, DOC_KEYS.GIAY_PHEP_BIEU_DIEN]
      },
      remove: {
        "Giam gia": [DOC_KEYS.THONG_BAO],
        "Tang phieu mua hang": [DOC_KEYS.THONG_BAO],
        "Trao thuong thi": [DOC_KEYS.THONG_BAO],
        "Chuong trinh may rui": [DOC_KEYS.THONG_BAO, DOC_KEYS.DANG_KY_SO, DOC_KEYS.CHAP_THUAN]
      }
    }
  },
  no: {
    documents: {
      add: {
        "Hang mau": [DOC_KEYS.THONG_BAO],
        "Tang hang hoa/dich vu": [DOC_KEYS.THONG_BAO],
        "Khach hang thuong xuyen": [DOC_KEYS.THONG_BAO],
        "Khuyen mai dien tu": [DOC_KEYS.THONG_BAO],
        "Nghe si bieu dien": [DOC_KEYS.HO_SO_BIEU_DIEN, DOC_KEYS.GIAY_PHEP_BIEU_DIEN]
      },
      remove: {
        "Chuong trinh may rui": [DOC_KEYS.THONG_BAO]
      }
    }
  }
};

function checkResult() {
  try {
    const alcohol = document.querySelector('input[name="alcohol"]:checked');
    const selectedPromotions = document.querySelectorAll('input[name="promotionType"]:checked');
    const resultDiv = document.getElementById('resultArea');
    const govReq = document.getElementById('govReq');
    const docs = document.getElementById('documents');
    const errorMsg = document.getElementById('errorMessage');

    // Hide error message
    if (errorMsg) errorMsg.style.display = 'none';

    if (!alcohol || selectedPromotions.length === 0) {
      if (errorMsg) {
        errorMsg.textContent = "‚ö†Ô∏è Vui l√≤ng ch·ªçn R∆∞·ª£u/Bia v√† √≠t nh·∫•t m·ªôt lo·∫°i h√¨nh khuy·∫øn m·∫°i!";
        errorMsg.style.display = 'block';
        setTimeout(() => {
          const yOffset = -20;
          const element = errorMsg;
          const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;
          window.scrollTo({ top: y, behavior: 'smooth' });
        }, 100);
      }
      return;
    }

    if (!govReq || !docs || !resultDiv) {
      if (errorMsg) {
        errorMsg.textContent = "‚ùå L·ªói: Kh√¥ng t√¨m th·∫•y c√°c ph·∫ßn t·ª≠ c·∫ßn thi·∫øt trong trang.";
        errorMsg.style.display = 'block';
      }
      return;
    }

    // Helper functions
    function getRequirement(promotionType, isAlcohol) {
      const config = PROMOTION_CONFIG[promotionType];
      if (!config) return "";
      
      if (isAlcohol && ALCOHOL_OVERRIDES.yes?.requirements?.[promotionType]) {
        return ALCOHOL_OVERRIDES.yes.requirements[promotionType];
      }
      return config.requirement;
    }
    
    function getDocuments(promotionType, isAlcohol) {
      const config = PROMOTION_CONFIG[promotionType];
      if (!config) return [];
      
      let docs = [...config.documents];
      const overrideKey = isAlcohol ? 'yes' : 'no';
      const overrides = ALCOHOL_OVERRIDES[overrideKey]?.documents;
      
      if (overrides) {
        // Remove documents
        if (overrides.remove?.[promotionType]) {
          docs = docs.filter(doc => !overrides.remove[promotionType].includes(doc));
        }
        // Add documents
        if (overrides.add?.[promotionType]) {
          docs.push(...overrides.add[promotionType]);
        }
      }
      
      return docs;
    }

    // --- Y√™u c·∫ßu ph√°p l√Ω ---
    const isAlcohol = alcohol.value === "yes";
    let reqText = "";
    const selectedPromotionsArray = Array.from(selectedPromotions);
    
    selectedPromotionsArray.forEach((promotion, index) => {
      const promotionType = promotion.value;
      const req = getRequirement(promotionType, isAlcohol);
      reqText += "‚ñ∂ " + promotionType + ":\n" + req;
      if (index < selectedPromotionsArray.length - 1) {
        reqText += "\n\n";
      }
    });
    reqText += "\n\n";
    
    if (isAlcohol) {
      reqText += "‚ö†Ô∏è L∆∞u √Ω: N·∫øu ch∆∞∆°ng tr√¨nh li√™n quan ƒë·∫øn r∆∞·ª£u/bia ‚â•15¬∞, ph·∫£i tu√¢n th·ªß quy ƒë·ªãnh qu·∫£n l√Ω ƒë·∫∑c bi·ªát theo Lu·∫≠t Ph√≤ng ch·ªëng t√°c h·∫°i c·ªßa r∆∞·ª£u, bia.\n";
    }

    // --- H·ªì s∆° c·∫ßn chu·∫©n b·ªã ---
    let allDocs = new Set();
    selectedPromotionsArray.forEach(promotion => {
      const promotionType = promotion.value;
      const docs = getDocuments(promotionType, isAlcohol);
      docs.forEach(doc => allDocs.add(doc));
    });
    
    const uniqueDocs = Array.from(allDocs);
    const docText = uniqueDocs.map(doc => "‚Ä¢ " + doc).join("\n");

    // Validate and set values
    if (reqText.trim() === "" || docText.trim() === "") {
      if (errorMsg) {
        errorMsg.textContent = "‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ hi·ªÉn th·ªã!";
        errorMsg.style.display = 'block';
      }
      return;
    }
    
    // Set values to textarea
    govReq.value = reqText.trim();
    docs.value = docText.trim();
    
    // Force visibility
    govReq.style.visibility = 'visible';
    docs.style.visibility = 'visible';
    
    // Scroll to result after content is rendered
    setTimeout(() => {
      const yOffset = -20; // Small offset from top
      const element = resultDiv;
      const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;
      window.scrollTo({ top: y, behavior: 'smooth' });
    }, 300);
  } catch (error) {
    if (errorMsg) {
      errorMsg.textContent = "C√≥ l·ªói x·∫£y ra: " + error.message;
      errorMsg.style.display = 'block';
    }
    console.error("Error:", error);
  }
}
</script>
  </body>
</html>
